# Сборщик кубика рубика

- Здесь реализован двухфазный алгоритм Коцембы.

- Этот алгоритм состоит из двух фаз. Изначально куб находится в группе G0, в которой используются все возможные повороты граней (U, D, F, B, L, R). Целью первой фазы является приведение куба к подгруппе G1 группы G0. В G1 все рёбра и углы считаются правильно ориентированными, а также рёбра среднего слоя находятся в среднем слое, поэтому используются повороты, которые не меняют ориентации рёбер и углов: U, D, F2, B2, R2, L2.

- Целью второй фазы является приведение куба к решённому состоянию, так как ориентации углов и рёбер не изменятся, то необходимо расположить углы и рёбра на их позиции, не обращая внимания на ориентацию.

Состояние кубика Рубика однозначно задаётся четырьмя значениями: 
1) Положением рёбер - перестановка длины 12;
2) Перестановка углов - перестановка длины 8;
3) Ориентация рёбер - ребро может находиться в правильной ориентации (значение 0) или в перевёрнутой (значение 1);
4) Ориентация углов - угол может находится в правильной ориентации (значение 0), повёрнутой по часовой стрелке (значение 1) или повёрнутой против часовой стрелки (значение 2).
   
- В данном алгоритме считается, что только повороты граней L и R меняют ориентацию рёбер. 

- Для поворота одной грани при переходе угла из верхней в нижнюю грань или наоборот угол поворачивается по против часовой стрелки, в противном случае - по часовой стрелке.

- Решение работает на итеративном поиске в глубину. Итеративный поиск в глубину задаётся максимальной глубиной поиска, которая с каждой неудачной итерацией увеличивается. Таким образом, достигается кратчайший путь из G0 в G1 и из G1 в G2 (решённый куб). Важно отметить, что это не гарантирует суммарно кратчайшего маршрута к собранному состоянию. В худшем случае длина пути из G0 в G1 равна 12, а из G1 в G2 равна 18. Следовательно, решение ограниченно сверху 30 ходами. 

- Для ускорения поиска сначала поиском в ширину предвычисляются таблицы оптимизации, которые хранят кратчайший путь из состояния к искомому состоянию (G1 для фазы 1 или G2 для фазы 2). Для фазы 1 используются 3 таблицы: ориентации углов, ориентации рёбер и положения рёбер среднего слоя. Для фазы 2 используются 3 таблицы: положения углов, положения рёбер среднего слоя, положения рёбер верхнего и нижнего слоёв. 

- В процессе поиска эти таблицы позволяют узнать минимальное необходимое расстояние для перехода в следующую группу. Благодаря этому, можно отбросить пути, которые не ведут к решению в пределах указанной максимальной глубины итеративного поиска.

- Чтобы посчитать таблицы оптимизации необходимо уметь хэшировать все состояния. Перестановки кодируются через факториальную систему счисления. Ориентации рёбер через двоичную систему счисления, а ориентации углов через троичную систему счисления. Для кодирования размещения четырёх рёбер из среднего слоя используется комбинаторная (биномиальная) система счисления.
